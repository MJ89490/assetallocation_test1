

<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>

.sidenav {
  height: 100%;
  width: 180px;
  position: fixed;
  z-index: 1;
  top: 0;
  left: 0;
  background-color: #005774;
  overflow-x: hidden;
  padding-top: 20px;
}

.sidenav a {
  padding-left: 16px;

  text-decoration: none;
  font-size: 23px;
  color: #fff;
  display: block;
}

.sidenav a:hover {
  color: #f1f1f1;
}

.container {
  margin-left: 180px; /* Same as the width of the sidenav */
  font-size: 28px; /* Increased text to enable scrolling */
  padding: 0px 10px;
}

@media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
}

.title-dashboard {color: #005774;
                  font-size: 2rem;
                  line-height: 1.4;
                  margin-top: 60px;
                  margin-bottom: 23px;
                  margin-left: 200px;
                  max-width: 75%;
                  display: inline-block;
                  z-index: 2;}



.row-asset-alloc-chart{margin-left: 130px; margin-bottom: 60px;}
.row-table-overall{margin-left: 300px;}
.row-tables-positions, .row-positions-assets-charts{margin-left: 210px;}
.table-perf{margin-left: 270px;}



.pos-perf-title{background-color: #005774; color: #fff;}
.signal-as-off-date{color: #005774;}


.sidenav-home{margin-top: 40px;}


#selectVersion {color: #005774 !important; border-color: #007faa !important; width: 140px; margin-top: 10px; height: 38px; margin-left: 10px;}
.form-models-select-sidebar {color: #005774 !important; border-color: #007faa !important; width: 140px; height: 38px; margin-left: 10px; padding-top:0px;}
.label-models-select-sidebar {color: #fff;  padding-left: 16px; margin-top: 10px;}
.btn-select-sidebar {font-size: 1rem; width: 45px;height: 38px}

.label-models-date-sidebar{color: #fff;  padding-left: 16px;}
#btn-select-charts-ok, #btn-select-export-data{width: 45px; margin-left: 58px; color: #005774; height: 25px; padding-top: 0px;}
#sidebar-start-date{width: 140px; margin-left: 10px; color: #005774;}
#sidebar-end-date{width: 140px; margin-left: 10px; color: #005774; margin-bottom: 10px;}


.navbar-default {
   margin-left: 180px;
}
.navbar-default .navbar-nav .nav-link {color: #007faa;}
.navbar-default .nav-item:hover .nav-link {color: rgb(102, 204, 238);}
</style>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top navbar-default py-lg-0 ">
        <button class="navbar-toggler" type="button"
                    data-toggle="collapse"
                    data-target="#navbarResponsive"
                    aria-controls="navbarResponsive"
                    aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
            </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item"><a class="nav-link" href="mailto:NexusQuantDev@lgim.com" target=""><b>Support</b></a></li>
            </ul>
        </div>
    </nav>

    <div class="sidenav">
        <a href="{{url_for('home')}}"><img alt="Legal and General" width="90px;" height="auto" src="https://www.legalandgeneral.com/web_resources/landscape/images/landg-logo.svg"></a>

        <a class="sidenav-home" href="{{url_for('home')}}">Home</a>

        <!-- ============================= CHARTS DATA ============================= -->
        <a class="sidenav-item" href="#">Charts Data</a>
        <form class="center" action="" method="POST" novalidate>
            {{ form.hidden_tag() }}
            <!-- Form: select the version for the model -->
            <div class="btn-group">
                {{ form.versions(class="form-control", id="selectVersion")}}
            </div>
           <div class="form-group">
               <label class="label-models-select-sidebar">Leverage type</label>
               <select id="inputleveragesidebar" name="leverage" class="form-control form-control-lg form-models-select-sidebar">
                   <option>v</option>
                   <option>e</option>
                   <option>n</option>
                   <option>s</option>
               </select>
           </div>
            <!--<a href="#"><button type="submit" class="btn btn-secondary btn-lg btn-select-sidebar">ok</button></a>-->
            {{ form.submit_ok_charts_data(class="form-control", id="btn-select-charts-ok")}}
        </form>

        <!-- ============================= EXPORT DATA ============================= -->
        <a class="sidenav-item" href="#">Export Data</a>
        <form class="center" action="" method="POST" novalidate>
            {{ form.hidden_tag() }}
            <!-- Form: select the version for the model -->
            <div class="btn-group">
                {{ form.versions(class="form-control", id="selectVersion")}}
            </div>
            <div class="form-group">
               <label class="label-models-select-sidebar">Leverage type</label>
               <select id="inputleveragesidebardexcel" name="leverage" class="form-control form-control-lg form-models-select-sidebar">
                   <option>v</option>
                   <option>e</option>
                   <option>n</option>
                   <option>s</option>
               </select>
           </div>
            <label class="label-models-date-sidebar">Start date</label>
            {{ form.start_date_inputs(class="form-control", placeholder="25/12/2018", id="sidebar-start-date") }}
             <label class="label-models-date-sidebar">End date</label>
            {{ form.end_date_inputs(class="form-control", placeholder="05/01/2019", id="sidebar-end-date") }}
            {{ form.submit_ok_export_data(class="form-control", id="btn-select-export-data")}}
        </form>
    </div>

    <!-- ============================= CHARTS AREA ============================= -->
    <div class="container-fluid">
        <h2 class="title-dashboard">TIMES Dashboard</h2>

        <!--Asset Allocation chart-->
        <div class="row row-asset-alloc-chart">
            <div class="col-lg-12">
                <div id="asset_allocation_over_time" class="responsive-plot"></div>
                <script type="text/javascript" src="{{ url_for('static', filename='js/times/line_chart_asset_allocation_over_time_times.js') }}"></script>
                <script type="text/javascript">
                    assetAllocationChart({{positions|tojson}}, {{dates_pos|tojson}}, {{names_pos|tojson}})
                </script>
            </div>
        </div>
        <!--Positions and Performance Titles-->
        <div class="row row-tables-positions">
             <div class="col-lg-9">
                 <table class="table table-hover">
                     <thead>
                        <tr>
                            <th class="text-center pos-perf-title" scope="col">Positions</th>
                        </tr>
                     </thead>
                 </table>
             </div>
            <div class="col-lg-3">
                 <table class="table table-hover">
                     <thead>
                        <tr>
                            <th class="text-center pos-perf-title" scope="col">Performance</th>
                        </tr>
                     </thead>
                 </table>
             </div>
        </div>
        <!--Positions and Performance Tables (overall)-->
        <div class="row row-table-overall">
            <div class="col-lg-6">
                 <table class="table table-hover">
                     <thead>
                        <tr>
                            <th class="text-muted text-center" scope="col">Signal as off <i class="signal-as-off-date">{{signal_as_off}}</i></th>
                            <th class="text-muted text-center" scope="col">Previous (%)</th>
                            <th class="text-muted text-center" scope="col">New (%)</th>
                        </tr>
                     </thead>

                     <tbody>
                        {% for category, pre_overall, new_overall in zip_results_pos_overall %}
                        <tr>
                            <td class="text-muted text-center">{{category}}</td>
                            <td class="text-muted text-center">{{pre_overall}}</td>
                            <td class="text-muted text-center">{{new_overall}}</td>
                        </tr>
                        {% endfor %}
                     </tbody>
                 </table>
             </div>

            <div class="col-lg-3">
                 <table class="table table-hover table-perf">
                     <thead>
                        <tr>
                            <th class="text-muted text-center" scope="col">Weekly (%)</th>
                            <th class="text-muted text-center" scope="col">YTD (%)</th>
                        </tr>
                     </thead>
                     <tbody>
                        {% for weekly, ytd in zip_results_perf_overall %}
                        <tr>
                            <td class="text-muted text-center">{{weekly}}</td>
                            <td class="text-muted text-center">{{ytd}}</td>
                        </tr>
                        {% endfor %}
                     </tbody>
                 </table>
            </div>
        </div>
        <!--Positions and Performance Tables-->
        <div class="row row-tables-positions">
            <div class="col-lg-9">
                 <table class="table table-hover">
                     <thead>
                        <tr>
                            <th class="text-muted text-center" scope="col"></th>
                            <th class="text-muted text-center" scope="col"></th>
                            <th class="text-muted text-center" scope="col">Mom Signals</th>
                            <th class="text-muted text-center" scope="col">Previous (%)</th>
                            <th class="text-muted text-center" scope="col">New (%)</th>
                            <th class="text-muted text-center" scope="col">Delta (%)</th>
                            <th class="text-muted text-center" scope="col">Trade</th>
                            <th class="text-muted text-center" scope="col">Size</th>
                        </tr>
                     </thead>
                     <tbody>
                        {% for category, name, mom, prev_pos, new_pos, delta, trade, size in zip_results_pos %}
                        <tr>
                            <td class="text-muted text-center">{{category}}</td>
                            <td class="text-muted text-center">{{name}}</td>
                            <td class="text-muted text-center">{{mom}}</td>
                            <td class="text-muted text-center">{{prev_pos}}</td>
                            <td class="text-muted text-center">{{new_pos}}</td>
                            {% if delta > 0 %}
                                <td class="text-center" style="color:rgb(0, 128, 0);">{{delta}}</td>
                            {% else %}
                                <td class="text-center" style="color:rgb(255, 0, 0);">{{delta}}</td>
                            {% endif %}
                            {% if trade == 'BUY' %}
                                <td class="text-center" style="color:rgb(0, 128, 0);">{{trade}}</td>
                            {% else %}
                                <td class="text-center" style="color:rgb(255, 0, 0);">{{trade}}</td>
                            {% endif %}
                            {% if size > 0 %}
                                <td class="text-center" style="color:rgb(0, 128, 0);">{{size}}</td>
                            {% else %}
                                <td class="text-center" style="color:rgb(255, 0, 0);">{{size}}</td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                     </tbody>
                 </table>
            </div>

            <div class="col-lg-3">
                 <table class="table table-hover">
                     <thead>
                        <tr>
                            <th class="text-muted text-center" scope="col">Weekly (%)</th>
                            <th class="text-muted text-center" scope="col">YTD (%)</th>
                        </tr>
                     </thead>
                     <tbody>
                        {% for weekly, ytd in zip_results_perf %}
                        <tr>
                            <td class="text-muted text-center">{{weekly}}</td>
                            <td class="text-muted text-center">{{ytd}}</td>
                        </tr>
                        {% endfor %}
                     </tbody>
                 </table>
            </div>
        </div>

        <!--Positions assets charts title-->
        <div class="row row-positions-assets-charts">
             <div class="col-lg-12">
                 <table class="table table-hover">
                     <thead>
                        <tr>
                            <th class="text-center pos-perf-title" scope="col">Positions</th>
                        </tr>
                     </thead>
                 </table>
             </div>
        </div>

        <!--Positions assets charts-->
        <div class="row">
            <div class="col-lg-4">


            </div>
        </div>

    </div>
</body>
</html>
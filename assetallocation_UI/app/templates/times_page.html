{% extends "basePage.html" %}

{% block timesModel %}
    <!-- Style of the Home Page -->
    <head>
        <!--TIMES PAGE CSS STYLE
        ================================================== -->
        <title> {{title }} </title>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <link rel="stylesheet" href="{{url_for('.static', filename='times_page.css')}}">
        <link rel="import" href="times_page_new_version_layout.html">
    </head>

    <!-- Body of the Dashboard Page -->
    <body>
         <div class="be-content">
              <div class="main-content container-fluid">
                  <div class="row">
                      <div class="col-12 col-lg-12">
                          <div class="widget widget-fullwidth-last-run be-loading">
                              <div class="widget-container">
                                  <h4 class="text-center"><em>Last Run: 14/02/2020</em></h4>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-12 col-lg-5"></div>
                      <div class="col-12 col-lg-3">
                          <div class="widget widget-fullwidth be-loading">
                              <div class="widget-container">
                                  <div class="text-center">
                                      <img id="icon-model-page" src="/static/img/bar_chart_3.png" alt="Bar_Chart_icon">
                                      <h2 class="overview-title"><strong><span class="overview-span">TIMES</span> Model</strong></h2>
                                      <div class="dashboard-btn">
                                          <a href="{{ url_for('times_dashboard') }}" target="_blank">
                                              <button class="btn btn-dashboard btn-primary" type="submit" id="dashboard-btn"><strong>Dashboard</strong></button>
                                          </a>
                                      </div>
                                      <form class="center" action="" method="POST" novalidate>
                                          {{ form.hidden_tag() }}
                                          <!-- Form: select the version for the model -->
                                          <div class="btn-group">
                                              {{ form.versions(class="form-control", id="selectVersionId")}}
                                          </div>
                                          <div class="btn-group">
                                              <div class="button-submit">
                                                  <button class="btn btn-lg btn-primary" type="submit" name="submit_button" value="selectVersions" id="selectInputDatesChartSubmit1">{{ form.submit_versions.label }}</button><br>
                                              </div>
                                          </div>
                                      </form>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="col-12 col-lg-5"></div>
                  </div>

                  {% if version_type == "New Version"  or  save == "save"  or run_model == "run_times_model" %}
                      <div class="row">
                          <div class="col-12 col-lg-1"></div>
                          <div class="col-12 col-lg-10">
                              <div class="widget widget-fullwidth-assetsInputs be-loading">
                                  <div class="widget-container">
                                      <div align="center">
                                          {% block assetsInputs%} {% endblock %}
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div class="col-12 col-lg-1"></div>
                      </div>

                        <div class="row">
                            <div class="col-12 col-lg-1"></div>
                                <div class="col-12 col-lg-10">
                                    <div class="widget widget-fullwidth-inputs be-loading">
                                        <div class="widget-chart-container" id="widget-chart-container">

                                             <!-- If the user write wrong parameters, then a popup will be displayed -->
                                            {% if message=="error parameters" %}
                                                 {% include 'pop_up_error_model.html' %}
                                            {% endif %}

                                            <form class="center" action="" method="POST" novalidate>
                                                {{ form.hidden_tag() }}
                                                <div align="center">
                                                    {% block inputs %} {% block runModel%} {% endblock %} {% endblock %}
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                        </div>

                        {% if run_model_ok=="run_times_model_ok" %}
                             {% include 'pop_up_model.html' %}
                        {% endif%}

                        <div class="row" id="row-inputs-save">
                            <div class="col-12 col-lg-6"></div>
                                <div class="col-12 col-lg-4">
                                    <div class="widget widget-fullwidth-save be-loading">
                                        <div class="widget-chart-container">
                                            <form class="center" action="" method="POST" novalidate>
                                                {{ form.hidden_tag() }}
                                                <div align="center">
                                                    {% block save %} {% endblock %}
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            <div class="col-12 col-lg-6"></div>
                        </div>

                        {% if save_file=="save_file" %}
                             {% include 'pop_up_save.html' %}
                        {% endif%}

                  {% endif %}
              </div>
         </div>
         <footer class="footer">
             <div class="container-fluid text-center">
                 <span class="text-muted">Â© Legal & General 2020</span>
             </div>
        </footer><!-- /.footer -->

    </body><!-- .body -->
{% endblock %}